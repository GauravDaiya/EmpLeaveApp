import{A as Fe,B as Ne,a as D,b as G,c as x,d as B,e as q,f as Ie,g as P,h as z,i as U,j as J,k as K,l as Me,m as Te,n as Q,o as W,p as X,q as Y,r as Z,s as ee,t as te,u as ie,v as ne,w as oe,x as ae,y as Le,z as Ve}from"./chunk-RDPW2HIO.js";import{b as A,d as f,f as R,g as k,j as O,k as j,l as H,m as $,o as ge}from"./chunk-DYC5FZPF.js";import{a as be,h,k as ue}from"./chunk-DKTAZ3D3.js";import"./chunk-EJJBCPAK.js";import{Ab as c,Cb as N,Fb as _,Fc as xe,Hb as se,Hc as we,Qb as fe,Rb as a,Sb as S,Tb as s,Ua as m,Va as v,Z as _e,_ as V,a as ce,b as Ce,ca as Se,db as De,ha as C,ia as F,jb as p,mb as he,nb as l,pa as g,qa as I,tb as M,ub as T,vb as L,wb as o,xb as n,yb as u,zb as d}from"./chunk-ZH6AJY4I.js";function Pe(e,t){if(e&1&&(o(0,"mat-option",17),a(1),n()),e&2){let i=t.$implicit;l("value",i),m(),S(i)}}function ze(e,t){if(e&1&&(o(0,"mat-option",17),a(1),n()),e&2){let i=t.$implicit;l("value",i),m(),S(i)}}var me=class e{constructor(t,i,r){this.fb=t;this.empSrv=i;this.router=r;this.employeeForm=this.fb.group({employeeName:["",f.required],contactNo:["",[f.required,f.pattern("^[0-9]{10}$")]],emailId:["",[f.required,f.email]],deptName:["",[f.required]],password:["",[f.required]],gender:["",[f.required]],role:["",[f.required]]})}hide=De(!0);clickEvent(t){this.hide.set(!this.hide()),t.stopPropagation()}employeeForm;RolesData=["Employee","Amin Department Employee","Department Head"];DepartmentData=["IT","Infra","Management"];isEditMode;EditEmployeeData=null;ngOnDestroy(){this.empSrv.ResetEmployeeEditMode()}ngOnInit(){this.empSrv.EditStatus$.subscribe(t=>{this.isEditMode=t}),this.empSrv.employeeToEdit$.subscribe(t=>{t&&(this.EditEmployeeData=t,this.employeeForm.patchValue(Ce(ce({},this.EditEmployeeData),{gender:this.EditEmployeeData.gender.toLowerCase()})),console.log(this.EditEmployeeData))})}submitForm(){if(this.employeeForm.valid)if(this.isEditMode){let t=ce({},this.employeeForm.value);this.empSrv.UpdateEmployee(this.EditEmployeeData._id,t).subscribe(i=>{this.router.navigate(["/dashboard/view-employee"])})}else this.empSrv.CreateNewEmp(this.employeeForm.value).subscribe(t=>{t&&this.router.navigate(["/dashboard/view-employee"])},t=>{console.error("Error adding employee:",t)});else alert("Form is invalid")}static \u0275fac=function(i){return new(i||e)(v($),v(D),v(h))};static \u0275cmp=C({type:e,selectors:[["app-create-employee"]],decls:56,vars:7,consts:[[1,"col-12","my-3",3,"ngSubmit","formGroup"],[1,"mx-3","my-4"],[1,"row","justify-content-between","my-3","mx-0","flex-wrap"],[1,"col-3","mx-3"],[1,"w-100"],["matInput","","formControlName","employeeName"],["type","email","formControlName","emailId","matInput","","placeholder","Ex. pat@example.com"],["matTextPrefix",""],["type","tel","formControlName","contactNo","matInput","","placeholder","555-555-1234"],["matSuffix",""],["aria-label","Select an option","formControlName","gender",1,"w-100"],["value","male"],["value","female"],["value","other"],["matInput","","formControlName","password",3,"type"],["mat-icon-button","","matSuffix","","type","button",3,"click"],["formControlName","deptName"],[3,"value"],["formControlName","role"],[1,"my-2"],["mat-stroked-button","",1,"my-3"]],template:function(i,r){i&1&&(o(0,"form",0),_("ngSubmit",function(){return r.submitForm()}),o(1,"h4",1),a(2),n(),o(3,"div",2)(4,"div",3)(5,"mat-form-field",4)(6,"mat-label"),a(7,"Employee Name"),n(),u(8,"input",5),n()(),o(9,"div",3)(10,"mat-form-field",4)(11,"mat-label"),a(12,"Employee Email"),n(),u(13,"input",6),n()(),o(14,"div",3)(15,"mat-form-field",4)(16,"mat-label"),a(17,"Employee Contact"),n(),o(18,"span",7),a(19,"+1 \xA0"),n(),u(20,"input",8),o(21,"mat-icon",9),a(22,"mode_edit"),n()()(),o(23,"div",3)(24,"mat-radio-group",10)(25,"mat-radio-button",11),a(26,"Male"),n(),o(27,"mat-radio-button",12),a(28,"Female"),n(),o(29,"mat-radio-button",13),a(30,"Other"),n()()(),o(31,"div",3)(32,"mat-form-field",4)(33,"mat-label"),a(34,"Enter your password"),n(),u(35,"input",14),o(36,"button",15),_("click",function(E){return r.clickEvent(E)}),o(37,"mat-icon"),a(38),n()()()(),o(39,"div",3)(40,"mat-form-field",4)(41,"mat-label"),a(42,"Emploee Department"),n(),o(43,"mat-select",16),T(44,Pe,2,2,"mat-option",17,M),n()()(),o(46,"div",3)(47,"mat-form-field",4)(48,"mat-label"),a(49,"Select Emploee Role"),n(),o(50,"mat-select",18),T(51,ze,2,2,"mat-option",17,M),n()()(),o(53,"div",19)(54,"button",20),a(55),n()()()()),i&2&&(l("formGroup",r.employeeForm),m(2),S(r.isEditMode?"Edit Employee Details:":"Add Emplyee Details:"),m(33),l("type",r.hide()?"password":"text"),m(),he("aria-label","Hide password")("aria-pressed",r.hide()),m(2),S(r.hide()?"visibility_off":"visibility"),m(6),L(r.DepartmentData),m(7),L(r.RolesData),m(4),S(r.isEditMode?"Edit Employee":"Create New Employee"))},dependencies:[O,A,R,k,j,H,z,q,Ie,P,U,G,J,K,x,B,Me,Te],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%!important}.mdc-text-field--filled[_ngcontent-%COMP%]:not(.mdc-text-field--disabled){background-color:transparent!important}"]})};function Je(e,t){e&1&&(o(0,"th",18),a(1," S.N. "),n())}function Ke(e,t){if(e&1&&(o(0,"td",19),a(1),n()),e&2){let i=t.index;m(),s(" ",i+1," ")}}function Qe(e,t){e&1&&(o(0,"th",18),a(1," ID. "),n())}function We(e,t){if(e&1&&(o(0,"td",19),a(1),n()),e&2){let i=t.$implicit;m(),s(" ",i._id," ")}}function Xe(e,t){e&1&&(o(0,"th",18),a(1," Employee Name "),n())}function Ye(e,t){if(e&1&&(o(0,"td",19),a(1),n()),e&2){let i=t.$implicit;m(),s(" ",i.employeeName," ")}}function Ze(e,t){e&1&&(o(0,"th",18),a(1," Employee Email Id "),n())}function et(e,t){if(e&1&&(o(0,"td",19),a(1),n()),e&2){let i=t.$implicit;m(),s(" ",i.emailId," ")}}function tt(e,t){e&1&&(o(0,"th",18),a(1," Employee Department "),n())}function it(e,t){if(e&1&&(o(0,"td",19),a(1),n()),e&2){let i=t.$implicit;m(),s(" ",i.deptName," ")}}function nt(e,t){e&1&&(o(0,"th",18),a(1," Employee Role "),n())}function ot(e,t){if(e&1&&(o(0,"td",19),a(1),n()),e&2){let i=t.$implicit;m(),s(" ",i.role," ")}}function at(e,t){e&1&&(o(0,"th",18),a(1," Employee Mobile "),n())}function mt(e,t){if(e&1&&(o(0,"td",19),a(1),n()),e&2){let i=t.$implicit;m(),s(" ",i.contactNo," ")}}function rt(e,t){e&1&&(o(0,"th",18),a(1," Actions "),n())}function lt(e,t){if(e&1){let i=N();o(0,"td",19)(1,"button",20),_("click",function(){let y=g(i).$implicit,E=se();return I(E.onEdit(y._id))}),o(2,"mat-icon"),a(3,"edit"),n()(),o(4,"button",21),_("click",function(){let y=g(i).$implicit,E=se();return I(E.onDelete(y._id))}),o(5,"mat-icon"),a(6,"delete"),n()()()}}function pt(e,t){e&1&&u(0,"tr",22)}function dt(e,t){e&1&&u(0,"tr",23)}var re=class e{constructor(t,i){this.empSrv=t;this.router=i}AllEmployeeData;dataSource=new ae;ngOnInit(){this.getAllEmp()}getAllEmp=()=>{this.empSrv.GellAllEmployee().subscribe(t=>{this.AllEmployeeData=t.data.AllEmployees,this.dataSource.data=this.AllEmployeeData})};displayedColumns=["sn","empId","empName","empEmailId","department","role","mobile","actions"];onDelete(t){this.empSrv.DeleteEmployee(t).subscribe(i=>{alert(i.message),this.getAllEmp()})}onEdit(t){this.empSrv.ActiveEmployeeEditMode(),this.empSrv.setEmployeeToEdit(t),this.router.navigate(["/dashboard/create-employee"])}static \u0275fac=function(i){return new(i||e)(v(D),v(h))};static \u0275cmp=C({type:e,selectors:[["app-view-employee"]],decls:33,vars:4,consts:[[1,"col-12","my-3"],[1,"m-2"],[1,"row"],[1,"col-11","my-3","mx-auto"],["tabindex","0",1,"example-container","mat-elevation-z8"],["mat-table","",3,"dataSource"],["matColumnDef","sn"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","empId"],["matColumnDef","empName"],["matColumnDef","empEmailId"],["matColumnDef","department"],["matColumnDef","role"],["matColumnDef","mobile"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","color","primary",3,"click"],["mat-icon-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(i,r){i&1&&(o(0,"div",0)(1,"h3",1),a(2,"Employee Data"),n(),o(3,"div",2)(4,"div",3)(5,"section",4)(6,"table",5),d(7,6),p(8,Je,2,0,"th",7)(9,Ke,2,1,"td",8),c(),d(10,9),p(11,Qe,2,0,"th",7)(12,We,2,1,"td",8),c(),d(13,10),p(14,Xe,2,0,"th",7)(15,Ye,2,1,"td",8),c(),d(16,11),p(17,Ze,2,0,"th",7)(18,et,2,1,"td",8),c(),d(19,12),p(20,tt,2,0,"th",7)(21,it,2,1,"td",8),c(),d(22,13),p(23,nt,2,0,"th",7)(24,ot,2,1,"td",8),c(),d(25,14),p(26,at,2,0,"th",7)(27,mt,2,1,"td",8),c(),d(28,15),p(29,rt,2,0,"th",7)(30,lt,7,0,"td",8),c(),p(31,pt,1,0,"tr",16)(32,dt,1,0,"tr",17),n()()()()()),i&2&&(m(6),l("dataSource",r.dataSource),m(25),l("matHeaderRowDef",r.displayedColumns)("matHeaderRowDefSticky",!0),m(),l("matRowDefColumns",r.displayedColumns))},dependencies:[K,B,Q,X,te,Y,W,ie,Z,ee,ne,oe],styles:["th[_ngcontent-%COMP%]{background-color:#0ff!important}"]})};var b=class e{constructor(t){this.http=t}AddLeave(t){return this.http.post("https://freeapi.miniprojectideas.com/api/EmployeeLeave/AddLeave",t)}GetAllLeaves(){return this.http.get("https://freeapi.miniprojectideas.com/api/EmployeeLeave/GetAllLeaves")}static \u0275fac=function(i){return new(i||e)(Se(be))};static \u0275prov=_e({token:e,factory:e.\u0275fac,providedIn:"root"})};function ct(e,t){if(e&1&&(o(0,"mat-option",8),a(1),n()),e&2){let i=t.$implicit;l("value",i.employeeId),m(),S(i.employeeName)}}var le=class e{constructor(t,i,r,y){this.fb=t;this.empSrv=i;this.leaveSrv=r;this.router=y;this.LeaveForm=this.fb.group({employeeId:["",[f.required]],fromDate:["",[f.required]],toDate:[{value:"",disabled:!0},[f.required]],noOfDays:["",[f.required]],leaveType:["",[f.required]],details:["",[f.required]]})}LeaveForm;AllEmployeeData;ngOnInit(){this.empSrv.GellAllEmployee().subscribe(t=>{this.AllEmployeeData=t.data,console.log(this.AllEmployeeData)}),this.LeaveForm.get("fromDate")?.valueChanges.subscribe(t=>{t?(this.LeaveForm.get("toDate")?.enable(),this.LeaveForm.get("toDate")?.setValue(null)):(this.LeaveForm.get("toDate")?.disable(),this.LeaveForm.get("toDate")?.setValue(null))}),this.LeaveForm.get("toDate")?.valueChanges.subscribe(()=>this.calculateNoOfDays())}disableToDate=t=>{if(!t)return!1;let i=this.LeaveForm.get("fromDate")?.value;return i?t>=new Date(i):!0};calculateNoOfDays(){let t=this.LeaveForm.get("fromDate")?.value,i=this.LeaveForm.get("toDate")?.value;if(t&&i){let r=new Date(t),E=new Date(i).getTime()-r.getTime(),Oe=Math.ceil(E/(1e3*3600*24))+1;this.LeaveForm.get("noOfDays")?.setValue(Oe)}else this.LeaveForm.get("noOfDays")?.setValue("")}submitForm(){this.LeaveForm.valid?this.leaveSrv.AddLeave(this.LeaveForm.value).subscribe(t=>{t&&this.router.navigate(["/dashboard/view-leave"])}):alert("Form is invalid")}static \u0275fac=function(i){return new(i||e)(v($),v(D),v(b),v(h))};static \u0275cmp=C({type:e,selectors:[["app-add-leave"]],decls:40,vars:6,consts:[["picker1",""],["picker2",""],[1,"col-12","my-3",3,"ngSubmit","formGroup"],[1,"m-2"],[1,"row","justify-content-start","my-3","mx-0","flex-wrap"],[1,"col-4","mx-3"],[1,"w-100"],["formControlName","employeeId"],[3,"value"],["matInput","","formControlName","fromDate",3,"matDatepicker"],["matIconSuffix","",3,"for"],[1,"col-3","mx-3"],["matInput","","formControlName","toDate",3,"matDatepicker","matDatepickerFilter"],["matInput","","formControlName","leaveType"],["matInput","","formControlName","details"],[1,"my-2"],["mat-stroked-button","",1,"my-3"]],template:function(i,r){if(i&1){let y=N();o(0,"form",2),_("ngSubmit",function(){return g(y),I(r.submitForm())}),o(1,"h4",3),a(2,"Add Leave:"),n(),o(3,"div",4)(4,"div",5)(5,"mat-form-field",6)(6,"mat-label"),a(7,"Emploee Name"),n(),o(8,"mat-select",7),T(9,ct,2,2,"mat-option",8,M),n()()(),o(11,"div",5)(12,"mat-form-field",6)(13,"mat-label"),a(14,"Choose From date"),n(),u(15,"input",9)(16,"mat-datepicker-toggle",10)(17,"mat-datepicker",null,0),n()(),o(19,"div",11)(20,"mat-form-field",6)(21,"mat-label"),a(22,"Choose To date"),n(),u(23,"input",12)(24,"mat-datepicker-toggle",10)(25,"mat-datepicker",null,1),n()(),o(27,"div",11)(28,"mat-form-field",6)(29,"mat-label"),a(30,"Enter Leave Type"),n(),u(31,"input",13),n()(),o(32,"div",11)(33,"mat-form-field",6)(34,"mat-label"),a(35,"Enter Details"),n(),u(36,"textarea",14),n()(),o(37,"div",15)(38,"button",16),a(39,"Create Leave"),n()()()()}if(i&2){let y=fe(18),E=fe(26);l("formGroup",r.LeaveForm),m(9),L(r.AllEmployeeData),m(6),l("matDatepicker",y),m(),l("for",y),m(7),l("matDatepicker",E)("matDatepickerFilter",r.disableToDate),m(),l("for",E)}},dependencies:[O,A,R,k,j,H,z,q,P,U,G,J,x,Le,Ve,Fe]})};function st(e,t){e&1&&(o(0,"th",19),a(1," S.N. "),n())}function ft(e,t){if(e&1&&(o(0,"td",20),a(1),n()),e&2){let i=t.index;m(),s(" ",i+1," ")}}function ut(e,t){e&1&&(o(0,"th",19),a(1," Employee Name "),n())}function vt(e,t){if(e&1&&(o(0,"td",20),a(1),n()),e&2){let i=t.$implicit;m(),s(" ",i.employeeName," ")}}function yt(e,t){e&1&&(o(0,"th",19),a(1," From Date "),n())}function Et(e,t){if(e&1&&(o(0,"td",20),a(1),n()),e&2){let i=t.$implicit;m(),s(" ",i.fromDate," ")}}function Ct(e,t){e&1&&(o(0,"th",19),a(1," To Date "),n())}function _t(e,t){if(e&1&&(o(0,"td",20),a(1),n()),e&2){let i=t.$implicit;m(),s(" ",i.toDate," ")}}function St(e,t){e&1&&(o(0,"th",19),a(1," Number of Days "),n())}function Dt(e,t){if(e&1&&(o(0,"td",20),a(1),n()),e&2){let i=t.$implicit;m(),s(" ",i.noOfDays," ")}}function ht(e,t){e&1&&(o(0,"th",19),a(1," Leave Type "),n())}function xt(e,t){if(e&1&&(o(0,"td",20),a(1),n()),e&2){let i=t.$implicit;m(),s(" ",i.leaveType," ")}}function wt(e,t){e&1&&(o(0,"th",19),a(1," Details "),n())}function bt(e,t){if(e&1&&(o(0,"td",20),a(1),n()),e&2){let i=t.$implicit;m(),s(" ",i.details," ")}}function gt(e,t){e&1&&(o(0,"th",19),a(1," Approval Date "),n())}function It(e,t){if(e&1&&(o(0,"td",20),a(1),n()),e&2){let i=t.$implicit;m(),s(" ",i.approvedDate," ")}}function Mt(e,t){e&1&&(o(0,"th",19),a(1," Approval Status "),n())}function Tt(e,t){e&1&&(o(0,"button",24),a(1,"Pending"),n())}function Lt(e,t){e&1&&(o(0,"button",25),a(1,"Approved"),n())}function Vt(e,t){e&1&&(o(0,"button",26),a(1,"Rejected"),n())}function Ft(e,t){if(e&1&&(o(0,"td",20),p(1,Tt,2,0,"button",21)(2,Lt,2,0,"button",22)(3,Vt,2,0,"button",23),n()),e&2){let i=t.$implicit;m(),l("ngIf",i.isApproved===null),m(),l("ngIf",i.isApproved===!0),m(),l("ngIf",i.isApproved===!1)}}function Nt(e,t){e&1&&u(0,"tr",27)}function At(e,t){e&1&&u(0,"tr",28)}var pe=class e{constructor(t,i){this.empSrv=t;this.leaveSrv=i}AllLeavesData;dataSource=new ae;ngOnInit(){this.leaveSrv.GetAllLeaves().subscribe(t=>{this.AllLeavesData=t.data,this.dataSource.data=this.AllLeavesData,console.log(this.AllLeavesData)})}displayedColumns=["sn","employeeName","fromDate","toDate","noOfDays","leaveType","details","approvedDate","isApproved"];static \u0275fac=function(i){return new(i||e)(v(D),v(b))};static \u0275cmp=C({type:e,selectors:[["app-view-leave"]],decls:36,vars:4,consts:[[1,"col-12","my-3"],[1,"m-2"],[1,"row"],[1,"col-11","my-3","mx-auto"],["tabindex","0",1,"example-container","mat-elevation-z8"],["mat-table","",3,"dataSource"],["matColumnDef","sn"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","employeeName"],["matColumnDef","fromDate"],["matColumnDef","toDate"],["matColumnDef","noOfDays"],["matColumnDef","leaveType"],["matColumnDef","details"],["matColumnDef","approvedDate"],["matColumnDef","isApproved"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-button","","color","warn",4,"ngIf"],["mat-button","","color","primary",4,"ngIf"],["mat-button","","color","accent",4,"ngIf"],["mat-button","","color","warn"],["mat-button","","color","primary"],["mat-button","","color","accent"],["mat-header-row",""],["mat-row",""]],template:function(i,r){i&1&&(o(0,"div",0)(1,"h3",1),a(2,"Leaves Data:"),n(),o(3,"div",2)(4,"div",3)(5,"section",4)(6,"table",5),d(7,6),p(8,st,2,0,"th",7)(9,ft,2,1,"td",8),c(),d(10,9),p(11,ut,2,0,"th",7)(12,vt,2,1,"td",8),c(),d(13,10),p(14,yt,2,0,"th",7)(15,Et,2,1,"td",8),c(),d(16,11),p(17,Ct,2,0,"th",7)(18,_t,2,1,"td",8),c(),d(19,12),p(20,St,2,0,"th",7)(21,Dt,2,1,"td",8),c(),d(22,13),p(23,ht,2,0,"th",7)(24,xt,2,1,"td",8),c(),d(25,14),p(26,wt,2,0,"th",7)(27,bt,2,1,"td",8),c(),d(28,15),p(29,gt,2,0,"th",7)(30,It,2,1,"td",8),c(),d(31,16),p(32,Mt,2,0,"th",7)(33,Ft,4,3,"td",8),c(),p(34,Nt,1,0,"tr",17)(35,At,1,0,"tr",18),n()()()()()),i&2&&(m(6),l("dataSource",r.dataSource),m(28),l("matHeaderRowDef",r.displayedColumns)("matHeaderRowDefSticky",!0),m(),l("matRowDefColumns",r.displayedColumns))},dependencies:[xe,x,Q,X,te,Y,W,ie,Z,ee,ne,oe]})};var Rt=[{path:"",redirectTo:"view-employee",pathMatch:"full"},{path:"create-employee",component:me},{path:"view-employee",component:re},{path:"add-leave",component:le},{path:"view-leave",component:pe}],de=class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=F({type:e});static \u0275inj=V({imports:[ue.forChild(Rt),ue]})};var ke=class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=F({type:e});static \u0275inj=V({imports:[we,ge,de,Ne]})};export{ke as EmployeeModule};
